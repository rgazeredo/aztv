# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is a **multi-tenant SaaS boilerplate** built with Laravel + React, designed to be a starting point for new SaaS projects. The boilerplate includes:
- **Backend**: Laravel 12 with Inertia.js for SPA functionality
- **Frontend**: React 19 with TypeScript, Tailwind CSS 4, and shadcn/ui components
- **Build Tools**: Vite with Laravel Wayfinder for type-safe routing
- **Database**: SQLite (default), with Laravel Cashier for Stripe integration
- **Testing**: Pest PHP for backend testing

## Development Commands

### Starting Development
```bash
# Full development environment (recommended)
composer dev
# This runs: server, queue, logs, and vite in parallel

# Alternative: SSR development
composer dev:ssr
```

### Building and Testing
```bash
# Frontend build
npm run build
npm run build:ssr  # For SSR

# Code quality
npm run lint        # ESLint with auto-fix
npm run types       # TypeScript type checking
npm run format      # Prettier formatting
npm run format:check

# Backend testing
composer test       # Runs PHP tests with Pest
```

### Laravel Commands
```bash
php artisan serve           # Start Laravel server
php artisan queue:listen    # Background jobs
php artisan pail           # Real-time logs
php artisan migrate        # Run migrations
```

## Architecture

### Multi-Tenancy
- **Tenant Model**: Each organization/company is a tenant with a `slug` and `name`
- **User Roles**: `admin` (global) and `client` (tenant-scoped)
- **Scoping**: `TenantScope` middleware automatically filters data by tenant
- **Admin Access**: Admin users can view all tenants and switch between them

### Authentication & Authorization
- Standard Laravel authentication with Inertia.js
- User model includes `role` field for admin/client distinction
- Tenant relationship: `User::belongsTo(Tenant::class)`
- Theme support: users can select light/dark/system themes

### Frontend Structure
- **Components**: Located in `resources/js/components/` with shadcn/ui in `components/ui/`
- **Pages**: Inertia.js pages in `resources/js/pages/`
- **Layouts**: Shared layouts in `resources/js/layouts/`
- **Routing**: Type-safe routes generated by Laravel Wayfinder
- **i18n**: Internationalization support with react-i18next

### Subscription Management
- Laravel Cashier integration for Stripe billing
- Registration with plan selection workflow
- Subscription success/cancel/retry flows
- Plan management through `PricingController`

### Boilerplate Features
- **Generic Landing Page**: Modern landing page with pricing, features, and contact sections
- **Multi-language Support**: i18n ready with Portuguese and English translations
- **Authentication System**: Complete auth flow with registration, login, password reset
- **Admin Dashboard**: Global administration panel for managing tenants and users
- **Client Dashboard**: Tenant-scoped dashboard for regular users
- **Responsive Design**: Mobile-first design with Tailwind CSS

### Key Files
- `routes/web.php`: Main route definitions
- `app/Http/Middleware/TenantScope.php`: Tenant data scoping
- `app/Models/User.php`: User model with role and tenant relationships
- `resources/js/app.tsx`: React app entry point
- `vite.config.ts`: Build configuration with React, Tailwind, and Wayfinder

## Database
- Default: SQLite (`database/database.sqlite`)
- Supports MySQL/PostgreSQL via environment configuration
- Queue jobs stored in database
- Session storage in database

## Environment Setup
- Copy `.env.example` to `.env`
- Configure database settings (SQLite by default)
- Set up Stripe keys for subscription features
- Configure mail settings for notifications

## Using as a Boilerplate
This project is designed to be a starting point for new multi-tenant SaaS applications:

1. **Customize Branding**: Update the landing page content in `resources/js/i18n/locales/`
2. **Add Your Features**: Build upon the existing dashboard structure
3. **Configure Pricing**: Set up your Stripe products and update pricing plans
4. **Domain Logic**: Add your specific business logic in the `app/` directory
5. **Frontend Components**: Extend the component library in `resources/js/components/`

## Key Boilerplate Benefits
- ✅ Multi-tenancy architecture ready
- ✅ Subscription billing integrated
- ✅ Authentication & authorization complete
- ✅ Modern React + TypeScript frontend
- ✅ Responsive design system
- ✅ Internationalization support
- ✅ Development tooling configured